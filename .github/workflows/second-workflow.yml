name: first-pipeline
on:
    push
jobs:
    checkout:
        runs-on: ubuntu-latest
        steps:
            - name: checkout the repository
              uses: actions/checkout@v4
            - name: list the directory
              run: ls
    build-and-deploy:
            runs-on: ubuntu-latest
            steps:
                - name: checkout the repository
                  uses: actions/checkout@v4
        
                - uses: azure/login@v2
                  with:
                        creds: ${{ secrets.AZURE_CREDENTIALS }}
        
                - name: Azure CLI script
                  uses: azure/CLI@v1
                  with:
                       azcliversion: latest
                       inlineScript: az account show

                - name: deploy bicep file 
                  run: |
                        az deployment group create -g azuretasks -f storage.bicep
                - name: deploy second resource
                       
                  run:  az deployment group create -g azuretasks -f ipaddress.bicep
                

          
                  
                    